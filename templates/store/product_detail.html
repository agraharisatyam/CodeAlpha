{% extends "base.html" %}

{% block title %}{{ product.name }} · SimpleStore{% endblock %}

{% block content %}
  <div class="pagehead">
    <a class="muted" href="{% url 'store:product_list' %}">← Back to products</a>
    <h1>{{ product.name }}</h1>
  </div>

  <div class="detail">
    <div class="detail__media">
      {% if product.image_url %}
        <img class="detail__img" src="{{ product.image_url }}" alt="{{ product.name }}" />
      {% else %}
        <div class="detail__img detail__img--placeholder">No image</div>
      {% endif %}
    </div>
    <div class="detail__info">
      <div class="detail__price">${{ product.price }}</div>
      <p class="detail__desc">{{ product.description|linebreaksbr|default:"No description." }}</p>

      <form class="row" action="{% url 'store:cart_add' product.pk %}" method="post">
        {% csrf_token %}
        <input type="hidden" name="next" value="{% url 'store:product_detail' product.pk %}" />
        <button class="btn" type="submit">Add to cart</button>
        <a class="btn btn--ghost" href="{% url 'store:cart' %}">Go to cart</a>
      </form>

      {% if qty_in_cart %}
        <p class="muted">In cart: {{ qty_in_cart }}</p>
      {% endif %}
    </div>
  </div>
{% endblock %}

